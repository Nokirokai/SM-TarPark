# ğŸ”´ Database Setup Required

## Error: 500 Internal Server Error

The backend is failing because the required database table **`kv_store_66851205`** doesn't exist yet in your Supabase database.

## âœ… Quick Fix (2 minutes)

### Step 1: Go to Supabase Dashboard
1. Visit: https://supabase.com/dashboard/project/psjynbtdjsvoslkqiaie/database/tables
2. Click **"New Table"** button

### Step 2: Create the KV Store Table
**Table Name:** `kv_store_66851205`

**Columns:**
| Column Name | Type   | Settings           |
|------------|--------|-------------------|
| `key`      | `text` | Primary Key, Not Null |
| `value`    | `jsonb`| Not Null          |

### Step 3: SQL Command (Easier Method)
Or simply run this SQL command in the SQL Editor:

```sql
CREATE TABLE kv_store_66851205 (
  key TEXT NOT NULL PRIMARY KEY,
  value JSONB NOT NULL
);
```

**To run SQL:**
1. Go to: https://supabase.com/dashboard/project/psjynbtdjsvoslkqiaie/sql/new
2. Paste the SQL command above
3. Click "Run"

### Step 4: Restart Your App
After creating the table, refresh your browser. The backend will automatically:
- Initialize 300 parking slots (Zones A, B, C, D)
- Create empty collections for vehicles, violations, payments
- Set up pre-seeded accounts:
  - **Admin:** admin@smtarpark.com / Admin123!
  - **Toll:** toll@smtarpark.com / Toll123!

## ğŸ” Why This Happened

The `kv_store.tsx` file is auto-generated by Figma Make and expects this table to exist. However, Supabase doesn't auto-create tables - you must create them manually.

## âœ… Verification

After creating the table, check the backend logs for these success messages:
```
âœ… Parking slots initialized
âœ… Vehicles collection initialized
âœ… Violations collection initialized
âœ… Payments collection initialized
âœ… Admin account created: admin@smtarpark.com
âœ… Toll account created: toll@smtarpark.com
```

## ğŸ‰ Once Complete

Your SM TarPark system will be fully operational:
- Public view will show real-time parking availability
- Toll personnel can add/remove vehicles
- Admin can manage violations, payments, and reports
- All data persists in the database

---

**Need Help?** Check the Supabase docs: https://supabase.com/docs/guides/database/tables
